# Underwatch WMS 仓储管理系统 - 需求分析说明书

**版本**：V1.0  
**日期**：2026-01-14  
**作者**：Underwatch WMS 项目组

---

## 1. 引言

### 1.1 编写目的
本文档旨在详细描述 **Underwatch WMS 仓储管理系统** 的功能需求、非功能需求及外部接口需求，明确系统建设目标与验收标准。本文档是系统设计、开发、测试与验收的依据，面向读者包括项目管理人员、软件架构师、开发人员及测试人员。

### 1.2 项目背景
在现代供应链体系中，仓储管理面临 SKU 激增、订单碎片化及批次管理复杂化等挑战。传统的人工或半自动化管理模式在准确性、可追溯性与作业效率方面已难以满足企业级需求。为此，本项目旨在构建一套基于 J2EE 架构的现代化仓储管理系统（WMS），通过全流程数字化管理，实现库存的精细化管控与作业效率的提升。

### 1.3 范围
本系统覆盖仓储管理的以下核心业务：
*   **基础数据**：多仓库建模、SKU 主数据、客户/供应商管理。
*   **入库业务**：收货、质检、上架。
*   **出库业务**：分配、波次、拣货、复核、发货。
*   **库内业务**：移库、盘点、冻结/解冻。
*   **系统管理**：RBAC 权限、操作审计。

### 1.4 术语定义
*   **WMS**：Warehouse Management System，仓储管理系统。
*   **SKU**：Stock Keeping Unit，库存量单位。
*   **PDA**：Personal Digital Assistant，此处指手持射频终端。
*   **RBAC**：Role-Based Access Control，基于角色的访问控制。
*   **FIFO/FEFO**：先进先出 (First In First Out) / 先失效先出 (First Expired First Out)。

---

## 2. 总体描述

### 2.1 用户特征
系统主要面向以下几类用户：
*   **平台管理员 (ADMIN)**：负责系统全局配置、用户账号管理及日志审计，具备最高权限。
*   **仓库经理 (W_MGR)**：负责单体仓库的策略配置（如上架/分配策略）、报表查看及关键单据（如盘点差异）的审批。
*   **收货员 (RECEIVER)**：负责入库环节的实物清点、质检录入与异常上报。
*   **上架员 (PUTAWAY)**：负责将已收货物料按系统指引放置到指定库位。
*   **拣货员 (PICKER)**：根据系统指令在库区进行物料拣选。
*   **复核员 (PACKER)**：负责出库前的二次校验、打包与面单打印。

### 2.2 运行环境
*   **客户端**：PC 端浏览器（Chrome/Edge），PDA 手持终端（Android/H5）。
*   **服务端**：Linux/Windows Server，JDK 17+。
*   **数据库**：MySQL 8.0 (InnoDB, utf8mb4)。
*   **缓存**：Redis 5.0+。

### 2.3 假设与依赖
*   **网络环境**：仓库内部需具备稳定的 WiFi 覆盖，保证 PDA 实时通信。
*   **硬件依赖**：PDA 需支持条码/二维码扫描功能；打印机需支持面单打印指令。
*   **数据隔离**：系统需支持多仓库数据逻辑隔离，不同仓库的操作员不可互访数据。

---

## 3. 功能需求

### 3.1 基础数据管理
#### 3.1.1 仓库建模
*   **描述**：支持多级仓库结构管理（仓库 -> 库区 -> 货架 -> 库位）。
*   **需求点**：
    *   支持库位编码自动生成与校验（唯一性）。
    *   支持库位属性配置：容量限制、混放策略（是否允许不同 SKU 混放）、混批策略。
    *   支持库位温层与用途标记（存储位、暂存位、拣货位）。

#### 3.1.2 物料主数据 (SKU)
*   **描述**：管理所有库存商品的基础属性。
*   **需求点**：
    *   支持 SKU 编码、名称、条码（多条码支持）、单位维护。
    *   **批次管理开关**：决定该 SKU 是否需要强制录入生产日期/批次号。
    *   **效期管理**：维护保质期天数，用于 FEFO 策略计算。

### 3.2 入库管理 (Inbound)
#### 3.2.1 入库单管理
*   **描述**：接收上游系统（ERP）下发或手工创建的入库预期。
*   **需求点**：
    *   支持采购入库、生产入库、退货入库等类型。
    *   包含单据审核流程（Draft -> Pending -> Approved）。

#### 3.2.2 收货与质检 (Receiving)
*   **描述**：依据入库单进行实物清点与质量检查。
*   **需求点**：
    *   支持 PDA 盲收与按单收货。
    *   支持批次号与生产日期录入（若 SKU 启用批次）。
    *   支持质检状态录入（良品/次品），次品自动冻结或生成退货建议。

#### 3.2.3 上架 (Putaway)
*   **描述**：将收货区物料移动至存储位。
*   **需求点**：
    *   **系统推荐**：根据上架策略（同品集中、空闲优先、动线优化）自动推荐目标库位。
    *   **实操确认**：允许上架员修改实际放入的库位，但需校验库位容量与混放规则。

### 3.3 出库管理 (Outbound)
#### 3.3.1 分配与预占 (Allocation)
*   **描述**：根据出库单需求，锁定库存资源。
*   **需求点**：
    *   支持 **FIFO** (先进先出) 与 **FEFO** (先失效先出) 分配策略。
    *   库存不足时支持整单挂起或部分分配。
    *   预占成功后，库存状态变更为 `Allocated`，不可被其他订单使用。

#### 3.3.2 拣货 (Picking)
*   **描述**：指导作业人员从库位取出物料。
*   **需求点**：
    *   支持生成拣货任务单（按单拣货或波次拣货）。
    *   PDA 扫描指引：扫描库位 -> 扫描 SKU -> 确认数量。
    *   强制校验：扫描条码错误或批次不匹配时，系统应阻断并提示。

#### 3.3.3 复核与发货 (Packing & Shipping)
*   **描述**：出库前的最后校验与交接。
*   **需求点**：
    *   支持复核台二次扫码，确保“拣货-发货”一致性。
    *   支持快递面单打印与箱号绑定。
    *   发货确认后，自动扣减库存并回传状态至上游系统。

### 3.4 库内作业
#### 3.4.1 盘点 (Cycle Count)
*   **描述**：核对账面库存与实物库存。
*   **需求点**：
    *   支持动盘（按 SKU/库位/动销率）与全盘。
    *   支持**盲盘**模式（PDA 不显示账面数量）。
    *   差异处理：实盘与账面不一致时生成差异单，需经理审核后方可调整库存。

#### 3.4.2 移库与冻结
*   **需求点**：
    *   支持主动移库（整理库位）与被动移库（上架策略触发）。
    *   支持库存冻结（质检不合格、待报废），冻结后不可分配。

### 3.5 系统管理
*   **用户权限**：基于 RBAC 模型，支持菜单、按钮及 API 级别的权限控制。
*   **操作审计**：记录所有关键业务操作（谁、在什么时候、做了什么、修改前后的值）。

---

## 4. 非功能需求

### 4.1 性能需求
*   **并发能力**：支持至少 50 个并发用户（主要是 PDA 高频操作）。
*   **响应时间**：
    *   WEB 页面加载时间 < 1秒。
    *   PDA 扫描接口响应时间 (P95) < 500毫秒。
*   **吞吐量**：支持日均 5,000+ 订单行处理能力。

### 4.2 安全性需求
*   **认证授权**：采用 JWT (JSON Web Token) 进行无状态认证；强制 HTTPS 传输。
*   **密码安全**：用户密码需加盐 (Salt) 并使用 BCrypt 哈希存储。
*   **跨域安全**：API 接口需配置严格的 CORS 策略，仅允许受信任的域名访问。

### 4.3 可靠性与可用性
*   **数据一致性**：库存扣减需保证强一致性，避免超卖；关键操作（如审核）需支持幂等性。
*   **服务降级**：文件服务（OSS）不可用时，需自动降级为本地存储，保证业务不中断。
*   **备份恢复**：数据库需支持每日全量备份及 Binlog 增量备份。

### 4.4 易用性需求
*   **PDA 适配**：手持端界面需适配 5-7 英寸屏幕，按钮尺寸适宜触控。
*   **错误提示**：报错信息需转化为业务语言（如“库存不足”而非“NullPointerException”）。

---

## 5. 数据需求

### 5.1 关键实体关系 (ER)
*   **仓库 (Warehouse)** 1 : N **库区 (Zone)** 1 : N **货架 (Shelf)** 1 : N **库位 (Location)**
*   **物料 (SKU)** 1 : N **库存 (Inventory)**
*   **库存 (Inventory)** 1 : N **库存流水 (Transaction Log)**
*   **入库单 (Inbound Order)** 1 : N **入库明细** 1 : N **收货任务**

### 5.2 数据字典
*   **库存状态**：`On_Hand` (在库), `Allocated` (预占), `Frozen` (冻结)。
*   **单据状态**：`Draft` (草稿), `Approved` (已审核), `Processing` (作业中), `Completed` (完成), `Closed` (关闭)。

---

## 6. 接口需求

### 6.1 用户接口 (UI)
*   **WEB 端**：基于 Vue3 + Element Plus 设计，风格简洁统一，支持夜间模式。
*   **PDA 端**：大字体、高对比度，重点突出扫描框与数量输入框。

### 6.2 软件接口 (API)
系统对外提供标准 RESTful API，响应格式为 JSON：
*   `POST /api/auth/login`：用户登录
*   `GET /api/inventory`：库存查询
*   `POST /api/inbound`：创建入库单
*   `POST /api/outbound`：创建出库单

### 6.3 硬件接口
*   **扫描枪**：支持 USB/蓝牙 模式接入，模拟键盘输入（以回车键结尾）。
*   **打印机**：支持通过浏览器打印指令调用本地或网络打印机。
